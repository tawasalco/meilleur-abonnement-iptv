---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import SEO from '../components/SEO.astro';
import { generateBreadcrumbSchema } from '../utils/schema';

const [serviceInfoEntries] = await Promise.all([
  getCollection('service-info'),
]);
const serviceInfo = serviceInfoEntries[0];
const data = serviceInfo?.data || {};

const brandName = data.brandName || 'IPTV Service';
const baseUrl = data.siteUrl || Astro.url.origin;

const breadcrumbSchema = generateBreadcrumbSchema([
  { name: 'Home', url: baseUrl },
  { name: 'Privacy Policy', url: `${baseUrl}/privacy` },
]);
---

<BaseLayout>
  <SEO
    slot="head"
    title={`Privacy Policy - ${brandName}`}
    description={`Privacy Policy for ${brandName}. Learn how we collect, use, and protect your personal information.`}
    canonicalURL={`${baseUrl}/privacy`}
    schema={[breadcrumbSchema]}
  />

  <div class="container mx-auto px-4 py-12 max-w-4xl">
    <h1 class="text-4xl font-bold mb-8">Privacy Policy</h1>
    
    <div class="prose prose-lg dark:prose-invert max-w-none">
      <p class="text-muted-foreground">Last updated: {new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}</p>
      
      <h2>1. Introduction</h2>
      <p>
        Welcome to {brandName}. We respect your privacy and are committed to protecting your personal data. 
        This privacy policy explains how we collect, use, and safeguard your information when you visit our website.
      </p>

      <h2>2. Information We Collect</h2>
      <p>We may collect the following types of information:</p>
      <ul>
        <li><strong>Personal Information:</strong> Name, email address, and contact details when you subscribe or contact us.</li>
        <li><strong>Usage Data:</strong> Information about how you interact with our website, including pages visited and time spent.</li>
        <li><strong>Device Information:</strong> Browser type, operating system, and IP address.</li>
        <li><strong>Cookies:</strong> Small files stored on your device to improve your experience.</li>
      </ul>

      <h2>3. How We Use Your Information</h2>
      <p>We use the collected information to:</p>
      <ul>
        <li>Provide and maintain our services</li>
        <li>Process transactions and send related information</li>
        <li>Send promotional communications (with your consent)</li>
        <li>Improve our website and user experience</li>
        <li>Comply with legal obligations</li>
      </ul>

      <h2>4. Data Security</h2>
      <p>
        We implement appropriate security measures to protect your personal information. 
        However, no method of transmission over the internet is 100% secure, and we cannot guarantee absolute security.
      </p>

      <h2>5. Third-Party Services</h2>
      <p>
        We may use third-party services for analytics, payment processing, and advertising. 
        These services have their own privacy policies governing the use of your information.
      </p>

      <h2>6. Your Rights</h2>
      <p>Depending on your location, you may have the right to:</p>
      <ul>
        <li>Access your personal data</li>
        <li>Correct inaccurate data</li>
        <li>Request deletion of your data</li>
        <li>Object to processing of your data</li>
        <li>Data portability</li>
      </ul>

      <h2>7. Contact Us</h2>
      <p>
        If you have questions about this privacy policy, please contact us at: 
        <a href={`mailto:${data.supportEmail || 'streamonlinever@gmail.com'}`}>{data.supportEmail || 'streamonlinever@gmail.com'}</a>
      </p>
    </div>
  </div>
</BaseLayout>
